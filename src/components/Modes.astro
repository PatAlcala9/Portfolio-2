---
import { Row } from '../../fwt'
import programmerAvif from '../../fwt/images/programmer.avif'
import programmerWebp from '../../fwt/images/programmer.webp'
import designerAvif from '../../fwt/images/designer.avif'
import designerWebp from '../../fwt/images/designer.webp'
import writerAvif from '../../fwt/images/writer.avif'
import writerWebp from '../../fwt/images/writer.webp'
---

<script>
  import { mode } from '../stores/mode.js'
  import { gsap } from 'gsap'
  import vars from '../assets/js/variables.js'

  const programmer = document.getElementById('programmer')
  programmer.addEventListener('click', () => {
    mode.set('programmerMode')
  })

  const designer = document.getElementById('designer')
  designer.addEventListener('click', () => {
    mode.set('designerMode')
  })

  const writer = document.getElementById('writer')
  writer.addEventListener('click', () => {
    mode.set('writerMode')
  })

  const duration = 0.4
  const ease = 'power2.out'

  mode.subscribe((val) => {
    switch (val) {
      case 'programmerMode':
        gsap.to(programmer, {
          duration,
          border: vars.modeProgrammerBoxBorder,
          borderRadius: '50px',
          padding: '0',
          y: 0,
          ease,
        })
        gsap.to(designer, {
          duration,
          border: vars.modeProgrammerBoxBorder,
          borderRadius: '50px',
          padding: '0',
          y: 0,
          ease,
        })
        gsap.to(writer, {
          duration,
          border: vars.modeProgrammerBoxBorder,
          borderRadius: '50px',
          padding: '0',
          y: 0,
          ease,
        })

        programmer.addEventListener('mouseenter', () => {
          gsap.to(programmer, {
            duration,
            border: vars.modeProgrammerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        programmer.addEventListener('mouseleave', () => {
          gsap.to(programmer, {
            duration,
            border: vars.modeProgrammerBoxBorder,
            scale: '1',
            ease,
          })
        })

        designer.addEventListener('mouseenter', () => {
          gsap.to(designer, {
            duration,
            border: vars.modeProgrammerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        designer.addEventListener('mouseleave', () => {
          gsap.to(designer, {
            duration,
            border: vars.modeProgrammerBoxBorder,
            scale: '1',
            ease,
          })
        })

        writer.addEventListener('mouseenter', () => {
          gsap.to(writer, {
            duration,
            border: vars.modeProgrammerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        writer.addEventListener('mouseleave', () => {
          gsap.to(writer, {
            duration,
            border: vars.modeProgrammerBoxBorder,
            scale: '1',
            ease,
          })
        })
        break
      case 'designerMode':
        gsap.to(programmer, {
          duration,
          border: vars.modeDesignerBoxBorder,
          borderRadius: '200px',
          padding: '8px',
          y: 30,
          ease,
        })
        gsap.to(designer, {
          duration,
          border: vars.modeDesignerBoxBorder,
          borderRadius: '150px',
          padding: '8px',
          y: -30,
          ease,
        })
        gsap.to(writer, {
          duration,
          border: vars.modeDesignerBoxBorder,
          borderRadius: '150px',
          padding: '8px',
          y: 30,
          ease,
        })
        programmer.addEventListener('mouseenter', () => {
          gsap.to(programmer, {
            duration,
            border: vars.modeDesignerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        programmer.addEventListener('mouseleave', () => {
          gsap.to(programmer, {
            duration,
            border: vars.modeDesignerBoxBorder,
            scale: '1',
            ease,
          })
        })

        designer.addEventListener('mouseenter', () => {
          gsap.to(designer, {
            duration,
            border: vars.modeDesignerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        designer.addEventListener('mouseleave', () => {
          gsap.to(designer, {
            duration,
            border: vars.modeDesignerBoxBorder,
            scale: '1',
            ease,
          })
        })

        writer.addEventListener('mouseenter', () => {
          gsap.to(writer, {
            duration,
            border: vars.modeDesignerBoxBorderGlow,
            scale: '1',
            ease,
          })
        })

        writer.addEventListener('mouseleave', () => {
          gsap.to(writer, {
            duration,
            border: vars.modeDesignerBoxBorder,
            scale: '1',
            ease,
          })
        })
        break
      case 'writerMode':
        gsap.to(programmer, {
          duration,
          border: '0',
          borderRadius: '0',
          padding: '0',
          y: 0,
          ease,
        })
        gsap.to(designer, {
          duration,
          border: '0',
          borderRadius: '0',
          padding: '0',
          y: 0,
          ease,
        })
        gsap.to(writer, {
          duration,
          border: '0',
          borderRadius: '0',
          padding: '0',
          y: 0,
          ease,
        })

        programmer.addEventListener('mouseenter', () => {
          gsap.to(programmer, {
            duration,
            border: '0',
            scale: '1.05',
            ease,
          })
        })

        programmer.addEventListener('mouseleave', () => {
          gsap.to(programmer, {
            duration,
            border: '0',
            scale: '1',
            ease,
          })
        })

        designer.addEventListener('mouseenter', () => {
          gsap.to(designer, {
            duration,
            border: '0',
            scale: '1.05',
            ease,
          })
        })

        designer.addEventListener('mouseleave', () => {
          gsap.to(designer, {
            duration,
            border: '0',
            scale: '1',
            ease,
          })
        })

        writer.addEventListener('mouseenter', () => {
          gsap.to(writer, {
            duration,
            border: '0',
            scale: '1.05',
            ease,
          })
        })

        writer.addEventListener('mouseleave', () => {
          gsap.to(writer, {
            duration,
            border: '0',
            scale: '1',
            ease,
          })
        })
        break
      default:
        break
    }
  })
</script>

<section>
  <Row gap={1.25}>
    <picture>
      <source srcset={programmerAvif.src} type="image/avif" />
      <source srcset={programmerWebp.src} type="image/webp" />
      <img id="programmer" style="border-radius: 0; cursor: pointer; flex: 1; border: 1px solid rgba(255,255,255,0.2)" width={250} height="auto" decoding="async" loading="lazy" alt="programmer mode" />
    </picture>

    <picture>
      <source srcset={designerAvif.src} type="image/avif" />
      <source srcset={designerWebp.src} type="image/webp" />
      <img id="designer" style="border-radius: 0; cursor: pointer; flex: 1; border: 1px solid rgba(255,255,255,0.2)" width={250} height="auto" decoding="async" loading="lazy" alt="designer mode" />
    </picture>

    <picture>
      <source srcset={writerAvif.src} type="image/avif" />
      <source srcset={writerWebp.src} type="image/webp" />
      <img id="writer" style="border-radius: 0; cursor: pointer; flex: 1; border: 1px solid rgba(255,255,255,0.2)" width={250} height="auto" decoding="async" loading="lazy" alt="writer mode" />
    </picture>
  </Row>
</section>

<style lang="sass">
  @use '/src/assets/css/variables.sass' as vars

  .container
    display: flex
    flex-direction: row
    width: 100%
    height: 90%
    margin: 0 auto
    gap: 0 2rem

    @media screen and (max-width: vars.$tablet)
      height: 5rem

  .box
    // height: 100%
    flex: 1
    padding: 16px 0 0 0
    height: 9rem
    width: 16rem
    background-color: #626d8c
    text-align: center
    border: 1px solid rgba(255,255,255,0.2)
    cursor: pointer
</style>
